<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../styles/language-styles.html">

<dom-module id="language-menu">
<template>
<style is="custom-style" include="language-styles">
:host {
  --primary-color: var(--paper-green-a700);
}
paper-dropdown-menu, paper-listbox {
    width: 200px;
    --paper-input-container-input: {
      text-transform: capitalize;
  };
}
a {
  text-decoration: none;
  color: inherit;
}
paper-item {
    text-transform: capitalize;
}
.orlang {
  color: var(--paper-green-a700);
}

</style>
	<paper-dropdown-menu class="custom" label="{{titleLabel}}" title="Select a translation in another language">
	  <paper-listbox slot="dropdown-content">
              <template is="dom-if" if="{{originalLanguage}}">
                <paper-item class="orlang">{{originalLanguage}}</paper-item>
              </template>
	     <template is="dom-repeat" items="{{languageChoice}}" as="language">
                  <template is="dom-if" if="{{!_otherLanguage(language, inputLanguage)}}">
                      <template is="dom-repeat" items="{{language.authors}}" as="author">
	    	          <paper-item id$="{{language.id}}"><a href$="/[[inputUrl]]/[[author]]">{{author}}</a></paper-item>
                      </template>
                  </template>
	    </template>
	  </paper-listbox>
	</paper-dropdown-menu>
</template>

<script>
    Polymer({
        is: 'language-menu',

        properties: {
          languageChoice: Array,
          titleLabel: String,
          inputLanguage: String,
          originalLanguage: String,
          inputUrl: String,
          newLanguage: {
            type: String,
            computed: "_otherLanguage(languageChoice, inputLanguage)"
          }
    	  },
        _otherLanguage: function(language, inputLanguage) {
          return (language.id === inputLanguage) ? true : false;
          }
    });

</script>
</dom-module>

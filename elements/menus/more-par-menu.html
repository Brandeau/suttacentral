<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/editor-icons.html">
<link rel="import" href="../../bower_components/iron-icons/social-icons.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">

<dom-module id="more-par-menu">
<template>
<style is="custom-style">
a {
  text-decoration: none;
  color: var(--disabled-text-color);
}

paper-item iron-icon {
    margin-right: 4px;
}

paper-item {
    @apply(--sc-sans-font);
}

</style>

    <paper-item on-tap="_copyLink"><iron-icon icon="link"></iron-icon>Copy link</paper-item>
    <paper-item on-tap="_copyToClipboard"><iron-icon icon="content-copy"></iron-icon> Copy table</paper-item>
    <paper-item><iron-icon icon="editor:format-quote"></iron-icon> Cite</paper-item>

</template>
<script>
    Polymer({
      is: 'more-par-menu',
      properties: {
        inputUrl: String
      },
     _copyToClipboard: function() {
        // From https://github.com/google/material-design-lite/blob/master/docs/_assets/snippets.js
        var snipRange = document.createRange();
        var copyTextarea = document.querySelector('.'+this.inputUrl);
        snipRange.selectNodeContents(copyTextarea);
        var selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(snipRange);
        var result = false;
        try {
          result = document.execCommand('copy');
        } catch (err) {
          // Copy command is not available
          console.error(err);
        }
        selection.removeAllRanges();
        return result;
      },
     _copyLink: function() {
        var textarea = document.createElement("textarea");
        textarea.textContent = "https://suttacentral.net/"+this.inputUrl;
        textarea.style.position = "fixed";
        document.body.appendChild(textarea);
        textarea.select();
        var result = false;
        try {
            return document.execCommand("copy");
        } catch (err) {
            console.error(err);
            return false;
        } finally {
            document.body.removeChild(textarea);
        }
      }
    });
</script>


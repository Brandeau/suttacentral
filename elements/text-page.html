<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/paper-styles/paper-styles.html">
<link rel="import" href="tool-bar.html">

<dom-module id="text-page">
<style is="custom-style">
paper-scroll-header-panel {
  height: 100%;
}

.textpage {
  height: 4em;
  background-color: var(--sc-gold-500);
  @apply(--shadow-elevation-8dp);
}

.textcontent {
  color: var(--primary-text-color);
  padding: 24px 0;
}
</style>
<template>

<iron-ajax
      auto
      url="[[_computeURL(suttaPath)]]"
      handle-as="text"
      last-response="{{suttaText}}"></iron-ajax>

<paper-scroll-header-panel>
  <div class="paper-header textpage">
    <tool-bar
        toolbar-color="var(--sc-gold-500)"
        toolbar-size=""
        top-title="Digha Nikaya 1—Bhikkhu Bodhi"
        setting-button="true"
        data-page='text'>
    </tool-bar>
  </div>

<div class="textcontent" inner-h-t-m-l="[[suttaText2]]"></div>

</paper-scroll-header-panel>
</template>
<script>
// addEventListener('WebComponentsReady', function() {

  Polymer({
    is: 'text-page',
    properties: {
      suttaPath: String,
      suttaText: {
        type: String,
        notify: true,
        value: function(){return []}
      },

      suttaText2: {
        type: String,
        computed: "_computeSutta(suttaText)"
      }

    },
      _computeURL: function(category) {
        return `../texts${category}.html`;
      },
      _computeSutta(suttaText) {
        const test = this.getElementsByClassName('author');
        const first = Array.from(test)[0];
        if (first !== undefined) {
          console.log('First element innerText --->', first.innerText);
        }
        return suttaText;
      }
      // ready: function() {
      //   // 1° solution
      //   const test = this.getElementsByClassName('author');
      //   const first = Array.from(test)[0];
      //   console.log('First element innerText --->', first.innerText);

      //   // // Or you can simply loop on the array
      //   // Array.from(test).forEach(item => console.log(item.innerText));

      //   // // 2° solution
      //   // const test2 = this.querySelectorAll('.author');
      //   // test2.forEach(item => console.log(item.innerText));
      // }
  });
// });
</script>
</dom-module>

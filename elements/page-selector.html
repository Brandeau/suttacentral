<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="sc-page-static.html">
<link rel="import" href="sc-view-suttaplex.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="sc-page-text.html">
<link rel="import" href="sc-page-segmented-text.html">
<dom-module id="page-selector">
<style is="custom-style">

</style>
<template>
<div class="content">
<app-route route="{{route}}"
      pattern="/"
      active="{{staticActive}}"></app-route>

<app-route route="{{route}}"
      pattern="/list"
      active="{{listActive}}"></app-route>

<!-- <app-route route="{{route}}"
      pattern="/sutta/:sutta"
      active="{{suttaActive}}"
      data="{{suttaData}}"
      tail="{{suttaTail}}"></app-route> -->

<template is="dom-if" if="{{_checkStatic(route)}}">
  <sc-page-static category="{{category}}"
      active="{{staticActive}}"></sc-page-static>
</template>

<template is="dom-if" if="{{_checkList(route)}}">
  <sc-view-suttaplex category="{{category}}" vagga-number="{{_getVaggaNumber(route)}}"
      active="{{listActive}}" input-language="en"></sc-view-suttaplex>

</template>

<template is="dom-if" if="{{_checkText(route)}}">
  <sc-page-text sutta-path="{{route.prefix}}"
      active="{{suttaActive}}"></sc-page-text>
</template>

<template is="dom-if" if="{{_checkSujato(route)}}">
  <sc-page-segmented-text sutta-path="{{route.prefix}}"
      active="{{suttaActive}}"></sc-page-segmented-text>
</template>

</div>
</template>
<script>
    Polymer({
      is: 'page-selector',
      _checkStatic: function(route) {
        return (route.path === "") ? true : false;
      },
      _checkList: function(route) {
        return (route.path.endsWith("/list")) ? true : false;
      },
      _getVaggaNumber: function(route) {
        if (route.path !== "/list" && route.path.endsWith("/list")) {
            var vnr = route.path.replace("/list","");
            return vnr.replace("/","");
          } else {
            return "";
          }
      },
      _checkText: function(route) {
        return (!route.path.endsWith("/list") && route.path !== "" && route.path !=="/sujato") ? true : false;
        },
      _checkSujato: function(route) {
        return (route.path === "/sujato") ? true : false;
      }

    });
</script>
</dom-module>